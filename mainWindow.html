<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ecom</title>
  <style>
    :root {
      --bright: white;
      --mid: rgb(71, 71, 71);
      --dark: black;
      --accent-1: #b81212;
      --accent-2: rgb(90, 170, 53);
      --modal-wrapper: rgba(0, 0, 0, 0.75);
      --modal: rgba(222, 222, 222, 0.65);
      --padding: 30px;
    }

    /* html, */
    body {
      padding: var(--padding);
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      border: 1px solid red;
    }

    * {
      margin: 0;
      padding: 0;
      font-weight: 400;
      letter-spacing: 0.08em;
      line-height: 120%;
      box-sizing: border-box;
      font-family: Helvetica, Arial, sans-serif;
    }




    /* message styling */
    .message-wrapper {
      z-index: 2199;
      width: 120vw;
      height: 120vh;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: var(--modal-wrapper)
    }

    .message {
      z-index: 2999;
      margin: auto;
      border-radius: 15px;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 250px;
      height: 200px;
      background-color: var(--bright);
      display: flex;
      text-align: center;
    }

    @media only screen and (max-width: 600px) {
      .message {
        border-radius: 15px;
        position: fixed;
        top: 50%;
        width: 250px;
        height: 200px;
        background-color: var(--bright);
        transform: translate(-50%, -50%);
      }

    }

    .message * {
      font-size: 28px;
      margin: auto;
    }

    .good {
      border: 4px solid var(--accent-2);
    }

    .bad {
      border: 4px solid var(--accent-1);
    }

    /* this is the form wrapper */
    #hello {
      margin: auto;
      vertical-align: middle;
      padding: 20px;
      width: 70vw;
      height: 70vh;
      border-radius: 15px;
      background-color: var(--bright);
      border: 1px solid var(--mid);
    }

    /* TODO make this sticky */
    nav {
      border: 1px solid red;
      position: fixed;
      top: 0px;
      left: 0px;
      width: 100%;
      height: 15vh;
      display: flex;
      padding: var(--padding);
    }

    .nav-wrapper {
      display: flex;
      justify-content: space-between;
      border: 1px solid red;
      width: 100%;
      margin: auto;
      font-size: 1.4em;
    }

    .brand-logo {
      font-size: 2em;
    }

    .nav-wrapper ul {
      display: flex;
      align-items: flex-end;
      vertical-align: middle;
      list-style: none;
    }

    .nav-wrapper ul * {
      margin-left: 20px;
    }

    li a {
      text-decoration: none !important;

    }
  </style>
</head>

<body>
  <nav>
    <div class="nav-wrapper">
      <a class="brand-logo center">Ecom</a>
      <ul>
        <li> <a href="#">Login</a></li>
        <li> <a href="#">Register</a></li>
      </ul>
    </div>
  </nav>
  <ul id="items"></ul>

  <div id="hello">
    hello
  </div>

  <button onclick="displayMessage('hey',0)">Hit Api</button>

  <script>
    const electron = require('electron');
    const { ipcRenderer } = electron;
    const ul = document.querySelector('#items');

    ipcRenderer.on('item:add', function (e, item) {
      ul.className = 'collection';
      const li = document.createElement('li');
      li.className = 'collection-item';
      const itemText = document.createTextNode(item);

      li.appendChild(itemText);
      ul.appendChild(li);
    });

    ipcRenderer.on('item:clear', function () {
      ul.className = '';
      ul.innerHTML = '';
    });

    ul.addEventListener('dblclick', removeItem);

    function removeItem(e) {
      event.target.remove();
      if (ul.children.length == 0) {
        ul.className = '';
      }
    }

    // fired to submit an item
    function handleAddItem(e) {
      fetch('http://localhost:8000/api/v1/items/1', {
        method: 'get',
        headers: new Headers({
          'Authorization': 'Bearer ' + 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwMDAvYXBpL3YxL3VzZXJzL3JlZ2lzdGVyIiwiaWF0IjoxNjU0ODYwMTA0LCJleHAiOjE2NTUxMDAxMDQsIm5iZiI6MTY1NDg2MDEwNCwianRpIjoiNlpsdVNGYll6WnRQN3l1MCIsInN1YiI6IjIiLCJwcnYiOiIyM2JkNWM4OTQ5ZjYwMGFkYjM5ZTcwMWM0MDA4NzJkYjdhNTk3NmY3In0.fSVMQUWxUihjAKxybSWX3AbgbR4RcAkLqaJAP-GSpAE',
          'Content-Type': 'application/x-www-form-urlencoded'
        })
      }).then(response => response.json())
        .then(response => {
          if (response.status == 'success') {
            console.log(response.item);
          }
        });
    }


    function displayMessage(message, theme) {
      let className;
      if (theme == 0) { className = 'good' } else { className = 'bad' }
      let messag_div = document.createElement("div");
      messag_div.id = 'message_key'
      messag_div.classList.add('message-wrapper')
      messag_div.innerHTML = `
    <div class="message ${className}">
        <span>
            ${message}
        </span>
    </div>
    `;
      let body = document.getElementsByTagName("BODY")[0]
      body.appendChild(messag_div);
      setTimeout(() => {
        document.getElementById('message_key').parentNode.removeChild(document.getElementById('message_key'));
      }, 1000)
    }
  </script>
</body>

</html>